# A shorter test suite file for testing THIS BRANCH with gce
# comments start with "#"

# These are mostly Comparison and Composite tests that have failed
# at some point during recent testing of Spark-related development,
# as well as some additional tests using Spark. The list of tests
# here is a subset of those in the current Production.suite.
# - K. Weide

#------------------------------------------------
# Tests for - Sod
#------------------------------------------------
## Ssource/Grid/GridSolvers/Multipole_new/od -t "Comparison/Sod/UG/2d/spark" -np 4 -cbase 2023-01-18
Sod -t "Composite/Sod/PseudoUG/2d/AMReX/spark" -np 4 -cbase 2023-01-18 -rbase 2023-01-19
Sod -t "Composite/Sod/PseudoUG/2d/AMReX/sparkMT" -np 4 \
	-e OMP_NUM_THREADS=2 -cbase 2023-01-18 -rbase 2023-01-19
## Sod -t "Composite/Sod/PseudoUG/2d/AMReX/sparkPIO" -np 4 -cbase 2023-01-18 -rbase 2023-01-19
Sod -t "Composite/Sod/PseudoUG/2d/Paramesh/sparkMT" -np 4 \
	-e OMP_NUM_THREADS=2 -cbase 2023-01-18 -rbase 2023-01-19
## Sod -t "Composite/Sod/AMR/2d/AMReX/unsplit" -np 2 -cbase 2023-01-18 -rbase 2023-01-19
## Sod -t "Composite/Sod/AMR/2d/AMReX/unsplitAsyncIO" -np 2 -cbase 2023-01-18 -rbase 2023-01-19

#------------------------------------------------
# Tests for - Sedov
#------------------------------------------------
## Sedov -t "Comparison/Sedov/UG/2d/spark" -np 4 -cbase 2023-01-18
## Sedov -t "Composite/Sedov/PseudoUG/2d/AMReX/spark" -np 4 -cbase 2023-01-18 -rbase 2023-01-19
## Sedov -t "Composite/Sedov/PseudoUG/2dCyl/Paramesh/spark" -np 8 -cbase 2023-01-18 -rbase 2023-01-19
## Sedov -t "Composite/Sedov/AMR/2d/AMReX/spark" -np 4 -cbase 2023-01-18 -rbase 2023-01-19

#------------------------------------------------
# Tests for - DustCollapse
#------------------------------------------------
## DustCollapse -t "Comparison/DustCollapse/AMR/1dSph/spark" -np 2 -cbase 2023-01-18

#------------------------------------------------
# Tests for - IsentropicVortex
#------------------------------------------------
## IsentropicVortex -t "Composite/IsentropicVortex/PseudoUG/2d/AMReX/unsplit" -np 4 -cbase 2023-01-18 -rbase 2023-01-19
## IsentropicVortex -t "Composite/IsentropicVortex/PseudoUG/2d/AMReX/spark" --debug -np 4 -cbase 2023-01-18 -rbase 2023-01-19
## IsentropicVortex -t "Composite/IsentropicVortex/PseudoUG/2d/Paramesh/unsplit" -np 4 -cbase 2023-01-18 -rbase 2023-01-19

#------------------------------------------------
# Tests for - YahilLattimerCollapse
#------------------------------------------------
## YahilLattimerCollapse -t "Comparison/Yahil/AMR/1dSph/Paramesh/spark" --debug -np 4 -cbase 2023-01-18
## YahilLattimerCollapse -t "Comparison/Yahil/AMR/2dCyl/Paramesh/spark" --debug -np 4 -cbase 2023-01-18
## YahilLattimerCollapse -t "Composite/Yahil/AMR/1dSph/Paramesh/spark" --debug -np 4 -cbase 2023-01-18 -rbase 2023-01-19
## YahilLattimerCollapse -t "Composite/Yahil/AMR/2dCyl/Paramesh/unsplit" --debug -np 4 -cbase 2023-01-18 -rbase 2023-01-19
## YahilLattimerCollapse -t "Composite/Yahil/AMR/2dCyl/Paramesh/spark" --debug -np 4 -cbase 2023-01-18 -rbase 2023-01-19

#------------------------------------------------
# Tests for - SNIa_DoubleDetonation
#------------------------------------------------

## SNIa_DoubleDetonation -t "Composite/SNIaShellDet/AMR/2d/Paramesh" -np 8 -cbase 2023-01-26 -rbase 2023-01-26_2

# The new comparison baseline 2023-01-30 was confirmed manually to be sfocu-same as
# /nfs/pub_html/gce/projects/FLASH5/TestResults/gce/2023-01-23/Comparison_SNIaDDT_AMR_2d_spark/testfaster_amr_unsplit_2d/snd_hdf5_chk_0001
# on 2023-01-30 by K. Weide.
## SNIa_DoubleDetonation -t "Comparison/SNIaDDT/AMR/2d/spark" -np 8 \
## 	-e OMP_NUM_THREADS=1 -cbase 2023-01-30

## SNIa_DoubleDetonation -t "Composite/SNIaDDT/AMR/2d/Paramesh" -np 8 \
## 	-e OMP_NUM_THREADS=1 -cbase 2023-01-26 -rbase 2023-01-26_2

# A variant of the previous one that should give the same results, see comments
# in the tests.yaml file.
#
# The new comparison baseline 2023-01-30 was confirmed manually to be sfocu-same as
# that of the Composite/SNIaDDT/AMR/2d/Paramesh test
# on 2023-01-30 by K. Weide.
# A new restart baseline 2023-01-30_2 was confirmed manually to be sfocu-same as
# that of the Composite/SNIaDDT/AMR/2d/Paramesh test, and to be equal within
# an sfocu tolerance of 1.e-10 to the result of the long run,
# on 2023-01-30 by K. Weide.  However, the tarball 2023-01-30_2.tar.gz (in
# /nfs/gce/projects/FLASH5/FlashXTestArchive/mainArchive/gce/) that stored
# that flashx_hdf5_chk_0002 file is no more -- and and a copy of that result
# does not exist cached in the proper local archive directory either -- since
# apparently the results of the "2023-01-30_2" run were later overwritten with
# results of a **different** run of the same name. Therefore, I have removed
# `-rbase 2023-01-30_2` on 2023-02-21.
# Then, a previously generated restart baseline 2023-01-31_2 was confirmed manually
# to be sfocu-same as that of the Composite/SNIaDDT/AMR/2d/Paramesh test,
# and to be equal within an sfocu tolerance of 2.61e-11 to the result of the long run.
# The file flashx_hdf5_chk_0002 still exists in 2023-01-31_2.tar.gz, thus -rbase 2023-01-31_2
# was added, again on 2023-02-21 by kweide.
## SNIa_DoubleDetonation -t "Composite/SNIaDDT/AMR/2d/pm4AltMortonBittree" -np 8 \
## 	-e OMP_NUM_THREADS=1 -cbase 2023-01-30 -rbase 2023-01-31_2

#------------------------------------------------
# Tests for - Poisson solver
#------------------------------------------------
unitTest/Gravity/Poisson3 -t "UnitTest/Gravity/AMR/3d/Paramesh" -np 1
unitTest/Gravity/Poisson3 -t "UnitTest/Gravity/AMR/3dSph/Paramesh" -np 1 -e OMP_NUM_THREADS=2
